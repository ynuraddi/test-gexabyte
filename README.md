# Задание:
Написать веб сервис для получения курса криптовалют. 
Курсы хранятся в базе данных mongo или postgres. 
Должна быть возможность посмотреть историю изменения стоимости криптовалюты. 
Сервис должен представлять API, работающий поверх HTTP в формате данных JSON.

Требования:
 - Язык программирования Go.
 - База данных MongoDB, PostgreSQL.
 - Данные по курсам валютных пар: BTCUSDT, ETHUSDT, SOLUSDT, TRXUSDT (можно добавить свою).
 - Если курсы не запрашивались в течение 10 минут, сервис сам получает актуальные курсы и сохраняет в базу.
 - Возможность получить краткую сводку с изменением курса криптовалют за 24 часа, минимальную, максимальную стоимость и цену.
 - Возможность получить изменения по курсу одной криптовалюты за 7 дней, 1 месяц, 3 месяца. Должна присутствовать пагинация.
 - Запуск в docker compose.
 - Результат работы в репозитории GitHub.
 - В качестве сервиса с курсами можно использовать Binance API или любой другой сервис. В одном запросе на такой сервис должны получать данные по одной паре.
 - Документация к использованию API.

Любые усложнения:
 - Использование Swagger
 - Использование кэша
 - Любые другие усложнения

---

# Дока:
 - Для запуска проекта используйте:
    ```
    docker-compose build
    docker-compose up
    ```
 - Swagger http://localhost:8080/swagger/index.html#/

# Обзор сервиса:
 - ```/currency [post]```
    Идея была в том что мой сервис будет парсить каждые 10 мин только те пары, которые добавлены в базу этим роутом.
 - ```/currencies [get]```
    Показывает как раз какие пары есть в базе данных
 - ```/prices [get]```
    Показывать записи в бд.
 - ```/prices/current [get]```
    Фетчит цены всех символов, сохраняет в базу только те который есть в бд, т.е. те которые мы отслеживаем
 - ```/prices/historical [get]```
    Тут мне кажется я намудрил с пагинацией, мне кажется я неправильно понял.
    Работает так:
    1. Я округляю значения startTime и endTime в зависимости от интервала в большую сторону как ceil (аналогично интервалы работают на бинансе) 
        В идеале тест нужно добавить который сверяет с данными с бинанса, а чтобы каждый раз не стучать бинанс еще лучше скачать ответы по которым тесты будут сверятся.
    2. Пагинация работает на интервалах, идея в том что можно указать окно startTime -> endTime любой длительности и поделить его на старницы, а количество страниц зависит от интервала.
        Опять же следует учитывать округление, например если взять 17 июля и округлить до месяца, то получиться 1 авг 00:00, а если до недели то 22 июля.

    Сделал так чтобы не запрашивать весь интервал полностью каждый раз и делать его на страницы, а запршивать именно ту страницу которую нужно получить. И кжшировать удобно было бы, вот отрезок и например в кэше лежит 1 и 7 страница.
 - ```/stat/24h [get]```
    Тут просто с бинанса берет инфу и выводит.

# Чего не успел сделать:
 - Интеграционные тесты для сервиса
 - Сделать обработку ошибок бинанса у клиента, выстроить их логику в сервис.
 - Поисправлять сервис:
    - Вынести работу с рутинами в отдельный пакет и просто вызывать результаты обработки, либо использовать какой-то другой пакет.
 - Добавить кэширование.
 - Сделать что-то с неймингом, он мне неочень нравится, наспех не придумал.
 - Добавить и структурировать логи.